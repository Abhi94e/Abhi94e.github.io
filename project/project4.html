<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Portfolio</title>
    <link rel="stylesheet" href="../styles.css">
    <script src="../script/scripts.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-python.min.js" defer></script>
    
    <style>
        #selected {
            color: blue;
        }
        .screen_minecraft{
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-direction: column;
            flex-wrap: nowrap;
            text-align: center;
        }

        h3 {
            font-size: 20px;
            padding-top: 20px;
        }
        h2{
            padding-top: 1%;
            font-size: 30px;
        }

        h1{
            padding-top: 4%;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <div class="returnBow"><a href="../index.html#projects" class="arrowReturn"><i class="bi bi-arrow-left-circle"></i></a></div>
            <ul>
                <li><a class=".smooth-scroll" href="project1.html">Huffman</a></li>
                <li><a class=".smooth-scroll" href="project2/project2.html">ToDoList</a></li>
                <li><a class=".smooth-scroll" href="project3.html">Jeux WEB</a></li>
                <li><a class=".smooth-scroll" id="selected">Plugin Minecraft</a></li>
            </ul>
            <ul style="border-left: solid 1px;">
                <li><a class=".smooth-scroll" href="Project5.html">ShareOrly</a></li>
                <li><a class=".smooth-scroll" href="project6.html">Facture</a></li>
            </ul>
            <div><i class="bi bi-brightness-high-fill" id="toggleDark"></i></div>
        </nav>
    </header>
    <section id="homeone">
        <h1>Présentation du Plugin Minecraft "Duel"</h1>
        <h2>Introduction</h2>
        <p>Dans cet article, nous allons explorer un plugin Minecraft que j'ai développé, intitulé "Duel". Ce plugin permet aux joueurs de s'engager dans des duels les uns contre les autres, ajoutant ainsi une dimension compétitive et excitante au jeu. Nous examinerons son fonctionnement, ses fonctionnalités et la manière dont il enrichit l'expérience de jeu.</p>
    </section>
    <section id="homeone">
        <h2>Partie 1 : Importer la librairie SPIGOT</h2>
        <p>Spigot est une librairie pour la création de plugins Minecraft. Elle offre une API riche et bien documentée,
            permettant aux développeurs de créer des plugins de façon intuitive, Pour commencer avec Spigot, il est essentiel
            d'importer la librairie dans mon projet sur <strong>ECLIPSE IDE</strong>.</p>
            <a href="https://hub.spigotmc.org/javadocs/bukkit/">https://hub.spigotmc.org/javadocs/bukkit/</a>
    </section>
    <section id="homeone">
        <h2>Partie 2 : Configuration du fichier plugin.yml</h2>
        <p>Cette configuration permet à Minecraft de reconnaître et d'enregistrer votre plugin avec les commandes associées lorsqu'il est chargé.</p>
        <pre>
            <code class="language-yaml">
    name: Duel  //nom du plugin
    version: 1.0 //version du plugin
    author: ihab //l'auteur du plugin
    main: fr.ib.duel.Duel //indique la classe principale du plugin
    commands:
    duel:
        description: Elle permet de gérer les combats dans le serveur
            </code>
        </pre>
    </section>
    <section id="homeone">
        <h2>Étape 3 : Calcul des Probabilités d'Apparition des Caractères</h2>
        <h3>Déclaration du Package et des Importations</h3>
        <p>Importe les classes de l'API Bukkit nécessaires pour la gestion des commandes, des joueurs et des plugins.</p>
        <pre>
            <code class="language-java">
    package fr.ib.duel;

    import java.util.HashMap;
    import java.util.Map;

    import org.bukkit.Bukkit;
    import org.bukkit.Location;
    import org.bukkit.command.Command;
    import org.bukkit.command.CommandSender;
    import org.bukkit.entity.Player;
    import org.bukkit.plugin.java.JavaPlugin;
            </code>
        </pre>
        <h3>Déclaration de la Classe</h3>
        <p>Déclare la classe Duel qui étend JavaPlugin, ce qui permet à cette classe d'être reconnue comme un plugin par Bukkit.</p>
        <pre>
            <code class="language-java">
    public class Duel extends JavaPlugin {
            </code>
        </pre>
        <h3>Déclaration des Variables</h3>
        <p>Déclare une map pour stocker les demandes de duel. La clé est le joueur cible et la valeur est le joueur qui a envoyé la demande.</p>
        <pre>
            <code class="language-java">
    private Map<Player, Player> players = new HashMap<>();
            </code>
        </pre>
        <h3>Méthode onEnable</h3>
        <p>La méthode onEnable est appelée lorsque le plugin est activé.<br>Enregistre la commande duel pour qu'elle soit gérée par cette classe.</p>
        <pre>
            <code class="language-java">
    @Override
    public void onEnable() {
        getCommand("duel").setExecutor(this);
    }
            </code>
        </pre>
    <h3>Méthode onCommand</h3>
    <p>Le plugin "Duel" pour Minecraft permet aux joueurs de s'engager dans des duels les uns contre les autres. Il est structuré autour de la classe Duel qui étend JavaPlugin. À l'activation du plugin (onEnable), la commande /duel est enregistrée.<br><br>

        Lorsque la commande /duel est exécutée par un joueur, plusieurs actions peuvent être entreprises en fonction des arguments fournis :<br><br>
        
        Aucun argument : Affiche des instructions d'utilisation.<br><br>
        Nom d'un joueur : Envoie une demande de duel au joueur spécifié.<br><br>
        accept : Accepte une demande de duel en attente et téléporte les deux joueurs à des positions spécifiques pour commencer le duel.<br><br>
        deny : Refuse une demande de duel en attente.<br><br>
        Le plugin utilise une map pour suivre les demandes de duel en attente, stockant le joueur cible et le joueur initiateur. Lorsque la demande est acceptée, les deux joueurs sont téléportés à des positions prédéfinies pour le duel. En cas de refus, les joueurs concernés sont informés, et la demande est retirée de la map.</p>
    <pre>
        <code class="language-java">
    @Override
    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {
        if(label.equalsIgnoreCase("duel") && sender instanceof Player) {
            Player player = (Player) sender;
            if(args.length == 0) { 
                player.sendMessage("§e§r/duel <player>");  
                player.sendMessage("§e§r/duel <accept/deny>");
                return true;
            }
            if(args.length == 1) { 
                String targetName = args[0];
                if(args[0].equalsIgnoreCase("accept")) {
                    if(players.containsKey(player)) {
                        player.sendMessage("Ok, le duel se lance !");
                        Player firstPlayerTarget = players.get(player);
                        firstPlayerTarget.sendMessage("Ok, le duel se lance !");
                        player.teleport(new Location(Bukkit.getWorld("world"), 9, 75, -4)); //coordonnée en jeux
                        firstPlayerTarget.teleport(new Location(Bukkit.getWorld("world"), 10, 75, -10));
                        players.remove(player);
                    }
                }
                else if(args[0].equalsIgnoreCase("deny")) { 
                    if(players.containsKey(player)) {
                        player.sendMessage("Ok, Vous avez refusé le duel !");
                        Player firstPlayerTarget = players.get(player);
                        firstPlayerTarget.sendMessage("Le joueur §e " + player.getName()+"§r a refusé le duel !");
                        players.remove(player);
                    }
                }
                else if(Bukkit.getPlayer(targetName) != null) { 
                    Player target = Bukkit.getPlayer(targetName); 
                    if(players.containsKey(target)) {
                        player.sendMessage("Votre joueur a deja une demande de duel en cours");
                        return true;
                    }
                    players.put(target, player);
                    player.sendMessage("Vous venez de demander un duel à §e" + targetName);
                    target.sendMessage("§9Vous venez de recevoir une demande de duel de §r" + player.getName());
                }
                else {
                    player.sendMessage("Le joueur §c" + targetName + "§r n'est pas en ligne");
                }
                return true;
            }
        }
        return false;
    }
            </code>
        </pre>
    </section>
    <section id="homeone">
        <h2>Conclustion</h2>
        <p>Voici le resultat en jeu</p>
        <div class="screen_minecraft">
            <div class="screen_first_player">
                <h3>vue du joueur 1</h3>
                <img src="../IMG/minecraft/1.PNG" alt="Description de l'image" width="500" height="300">
                <img src="../IMG/minecraft/2.PNG" alt="Description de l'image" width="500" height="300">
            </div>
            <div class="screen_target">
                <h3>vue du joueur 2</h3>
                <img src="../IMG/minecraft/3.PNG" alt="Description de l'image" width="500" height="300">
                <img src="../IMG/minecraft/4.PNG" alt="Description de l'image" width="500" height="300">
            </div>
        </div>
    </section>
    
</body>

</html>